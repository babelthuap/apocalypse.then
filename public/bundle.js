"use strict";var app=angular.module("app",["satellizer","ui.router","btford.socket-io"]);app.config(["$stateProvider","$urlRouterProvider","$authProvider",function(e,o,a){o.otherwise("/"),e.state("home",{url:"/",templateUrl:"home/home.html",controller:"homeCtrl"}).state("game",{url:"/game",templateUrl:"game/game.html",controller:"gameCtrl"}),a.google({clientId:"403356814232-l0l5edtnt2uamllctq4eeuflrr4t395d.apps.googleusercontent.com"})}]);var app=angular.module("app");app.controller("gameCtrl",["$scope","$auth","$state","GameService","socket",function(e,o,a,t,r){function n(o,a){var t=e.player.location;e.gameboard[t[0]][t[1]]=0,e.gameboard[o][a]=e.player.name,e.player.location=[o,a]}if(!o.isAuthenticated())return a.go("home");console.log("gameCtrl running"),r.on("message",function(e){console.log(e)}),e.logout=function(){o.logout(),a.go("home")},e.player;var l,c;t.getBoardState().then(function(o){e.gameboard=o.data.gameboard,l=e.gameboard.length,c=e.gameboard[0].length,e.player=o.data.player;var a=e.player.location[0],t=e.player.location[1];e.gameboard[a][t]=e.player.name})["catch"](function(e){console.error(e)});var u=function(e,o){return 0>e?0:e>o?o:e},p={37:function(e){var o=e[1]-1;n(e[0],u(o,c-1))},38:function(e){var o=e[0]-1;n(u(o,l-1),e[1])},39:function(e){var o=e[1]+1;n(e[0],u(o,c-1))},40:function(e){var o=e[0]+1;n(u(o,l-1),e[1])}};e.$on("keydown",function(o,a){console.log("key pressed:",a);var t=e.player.location;p[a](t)})}]);var app=angular.module("app");app.service("GameService",["$http",function(e){this.getBoardState=function(){return e.get("/game")}}]);var app=angular.module("app");app.controller("homeCtrl",["$scope","$auth","$state",function(e,o,a){console.log("homeCtrl running"),e.authenticate=function(e){o.authenticate(e).then(function(e){return a.go("game")})["catch"](function(e){return console.error("error:",e)})}}]);var app=angular.module("app");app.controller("keyCtrl",["$scope",function(e){console.log("keyCtrl running"),e.log=function(o){o.which>=37&&o.which<=40&&(o.preventDefault(),e.$broadcast("keydown",o.which))}}]);var app=angular.module("app");app.factory("socket",["socketFactory",function(e){var o=io.connect("http://localhost:3000");return e({ioSocket:o})}]);