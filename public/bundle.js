"use strict";var app=angular.module("app",["satellizer","ui.router","btford.socket-io"]);app.config(["$stateProvider","$urlRouterProvider","$authProvider",function(o,e,t){e.otherwise("/"),o.state("home",{url:"/",templateUrl:"home/home.html",controller:"homeCtrl"}).state("game",{url:"/game/:id",templateUrl:"game/game.html",controller:"gameCtrl"}),t.google({clientId:"403356814232-l0l5edtnt2uamllctq4eeuflrr4t395d.apps.googleusercontent.com"})}]);var app=angular.module("app");app.controller("gameCtrl",["$scope","$stateParams","$auth","$state","GameService","socket",function(o,e,t,a,n,r){function l(t,a){o.gameboard[t][a].player||(r.emit("changeLoc",{oldLoc:o.loc,newLoc:[t,a],name:o.name,id:e.id}),o.loc=[t,a])}if(!t.isAuthenticated())return a.go("home");console.log("gameCtrl running with id",e.id),r.emit("userlogin",e.id),o.logout=function(){t.logout(),r.emit("logout",o.loc),a.go("home")};var c,i;o.gameboard;var u=o.$on("keydown",function(e,t){m[t](o.loc)});r.on("startUser",function(e){o.name=e.name,o.loc=e.loc,c=e.HEIGHT,i=e.WIDTH}),r.on("boardUpdate",function(e){o.gameboard=e}),r.on("playerDeath",function(t){console.log("somebody died:",t),t===e.id&&(o.loc=null,u(),alert("YOU DEAD"))});var p=function(o,e){return 0>o?0:o>e?e:o},m={37:function(o){var e=o[1]-1;l(o[0],p(e,i-1))},38:function(o){var e=o[0]-1;l(p(e,c-1),o[1])},39:function(o){var e=o[1]+1;l(o[0],p(e,i-1))},40:function(o){var e=o[0]+1;l(p(e,c-1),o[1])}}}]);var app=angular.module("app");app.service("GameService",["$http",function(o){this.getBoardState=function(){return o.get("/game")}}]);var app=angular.module("app");app.controller("keyCtrl",["$scope",function(o){console.log("keyCtrl running"),o.log=function(e){e.which>=37&&e.which<=40&&(e.preventDefault(),o.$broadcast("keydown",e.which))}}]);var app=angular.module("app");app.controller("homeCtrl",["$scope","$rootScope","$auth","$state","socket",function(o,e,t,a,n){console.log("homeCtrl running"),o.authenticate=function(o){t.authenticate(o).then(function(o){console.log("res:",o),a.go("game",{id:o.data.id})})["catch"](function(o){return console.error("error:",o)})}}]);var app=angular.module("app");app.factory("socket",["socketFactory",function(o){var e=io.connect("http://localhost:3000");return o({ioSocket:e})}]);